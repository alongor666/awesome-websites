<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self'
            https://unpkg.com
            https://cdn.tailwindcss.com
            https://cdn.jsdelivr.net
            https://cdnjs.cloudflare.com;
        style-src 'self' 'unsafe-inline'
            https://cdn.tailwindcss.com
            https://cdnjs.cloudflare.com;
        img-src 'self' data: https: http:;
        font-src 'self' https://cdnjs.cloudflare.com;
        connect-src 'self' https://generativelanguage.googleapis.com
            https://www.google.com;
        frame-src 'self' https://discord.com https://colab.research.google.com;
        base-uri 'self';
        form-action 'self';
        object-src 'none';
        require-trusted-types-for 'script';
    ">
    <title>ÈòøÈæôÁöÑÊï∞Â≠óÂåñ‰ΩúÊàò‰∏≠ÂøÉ | Ah Long's OS v5.3</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js" integrity="sha384-dsKF6mTFbcNJ43SlwL16S4PsymmtsPsOYBYCgIpFYXWGpuxleajsS7EusvgAc5/V" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha384-iw3OoTErCYJJB9mCa8LNS2hbsQ7M3C0EpIsO/H5+EGAkPGc6rk+V8i04oW/K5xq0" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" integrity="sha384-948ahk4ZmxYVYOc+rxN1H2gM1EJ2Duhp7uHtZ4WSLkV4Vtx5MUqnV+l7u9B+jFv+" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js" integrity="sha384-vdScihEZCfbPnBQf+lc7LgXUdJVYyhC3yWHUW5C5P5GpHRqVnaM6HJELJxT6IqwM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.js" integrity="sha384-57VRFGvLpSky5EqUImBJSOkJI+6xYMONZqn8Zh70E+1DyMPpN1vQkaJaN4YqRmln" crossorigin="anonymous"></script>
  </head>
<body class="h-screen flex overflow-hidden text-sm">

<div id="app" class="flex w-full h-full">

    <!-- macOS È£éÊ†º‰æßËæπÊ†è -->
    <aside class="sidebar w-64 flex-shrink-0 flex flex-col h-full z-20">
        <!-- È°∂ÈÉ®Ê†áÈ¢òÊ†è -->
        <div class="flex items-center justify-between border-b border-gray-200/50">
            <div class="window-controls">
                <div class="window-control close" title="ÂÖ≥Èó≠"></div>
                <div class="window-control minimize" title="ÊúÄÂ∞èÂåñ"></div>
                <div class="window-control maximize" title="ÊúÄÂ§ßÂåñ"></div>
            </div>
        </div>

        <div class="p-6 pb-4">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg">
                    <i class="fa-solid fa-compass-drafting"></i>
                </div>
                <div>
                    <h1 class="font-semibold text-base text-gray-900">‰ΩúÊàò‰∏≠ÂøÉ</h1>
                    <p class="text-xs text-gray-500">v5.3 Professional</p>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-2 mb-4">
                <button @click="openAddModal" class="macos-btn flex items-center justify-center gap-1.5 text-xs">
                    <i class="fa-solid fa-plus"></i>
                    <span>ÂΩïÂÖ•</span>
                </button>
                <button @click="openAnalysisModal" class="macos-btn macos-btn-primary flex items-center justify-center gap-1.5 text-xs">
                    <i class="fa-solid fa-chart-pie"></i>
                    <span>ÁõòÁÇπ</span>
                </button>
            </div>
        </div>

        <nav class="flex-1 overflow-y-auto custom-scroll pb-6">
            <div class="nav-item" :class="currentFilter==='all' ? 'nav-item-active' : ''" @click="currentFilter='all'">
                <i class="fa-solid fa-border-all w-4 opacity-60"></i>
                <span class="ml-3">ÂÖ®Â±ÄÂÖ®Èáè</span>
                <span class="ml-auto text-xs opacity-60">{{ allSites.length }}</span>
            </div>

            <template v-for="(group, gIndex) in groupedCategories" :key="gIndex">
                <div class="group-header">
                    <i :class="group.icon"></i>
                    {{ group.groupName }}
                </div>
                <div v-for="cat in group.items" :key="cat.id"
                     class="nav-item text-xs"
                     :class="currentFilter===cat.id ? 'nav-item-active' : ''"
                     @click="currentFilter=cat.id">
                    <span class="flex items-center gap-2">
                        <span class="w-1.5 h-1.5 rounded-full opacity-60" :style="{background: cat.color}"></span>
                        {{ cat.name }}
                    </span>
                    <span class="ml-auto text-xs opacity-50">{{ getCountByCategory(cat.id) }}</span>
                </div>
            </template>
        </nav>

        <!-- Â∫ïÈÉ®Áä∂ÊÄÅÊ†è -->
        <div class="p-4 border-t border-gray-200/50 flex justify-between items-center">
            <span class="text-xs text-gray-500">
                <i class="fa-solid fa-database mr-1"></i> Data v5.3
            </span>
            <button @click="openSettings" class="text-gray-400 hover:text-gray-600 transition-colors">
                <i class="fa-solid fa-gear"></i>
            </button>
        </div>
    </aside>

    <!-- macOS È£éÊ†º‰∏ªÂÜÖÂÆπÂå∫ -->
    <main class="flex-1 h-full flex flex-col overflow-hidden relative">
        <!-- macOS Ê†áÈ¢òÊ†è -->
        <header class="h-16 flex items-center justify-between px-8 bg-white/60 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-10">
            <div class="flex items-center gap-6 flex-1">
                <h2 class="text-base font-semibold text-gray-900">{{ getCurrentPageTitle }}</h2>
                <div class="h-6 w-px bg-gray-300"></div>
                <!-- Spotlight È£éÊ†ºÊêúÁ¥¢Ê°Ü -->
                <div class="relative w-full max-w-md">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fa-solid fa-magnifying-glass text-gray-400"></i>
                    </div>
                    <input
                        type="text"
                        v-model="searchQuery"
                        placeholder="ÊêúÁ¥¢ (‚åòK)"
                        class="macos-search w-full pl-10 pr-4 text-sm"
                        @keydown.cmd.k.prevent="searchQuery = ''; $el.focus()"
                    >
                </div>
            </div>
            <div class="flex items-center gap-4">
                <!-- Êó∂Èó¥ÊòæÁ§∫ -->
                <div class="text-sm text-gray-600 font-medium">
                    {{ currentTime }}
                </div>
            </div>
        </header>

        <!-- ÂÜÖÂÆπÂå∫Âüü -->
        <div class="flex-1 overflow-y-auto p-8 custom-scroll">
            <!-- Á©∫Áä∂ÊÄÅ -->
            <div v-if="displaySites.length === 0" class="flex flex-col items-center justify-center h-full">
                <div class="w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mb-4">
                    <i class="fa-solid fa-inbox text-3xl text-gray-400"></i>
                </div>
                <p class="text-gray-500">ÊöÇÊó†Áõ∏ÂÖ≥ËµÑ‰∫ß</p>
            </div>

            <div v-else>
                <!-- ÂÖ®Â±ÄËßÜÂõæÔºöÊåâ‰∏öÂä°ÊùøÂùóÂàÜÁªÑ -->
                <div v-if="currentFilter === 'all'">
                    <div v-for="(groupData, groupName) in displaySitesGrouped" :key="groupName" class="mb-10">
                        <div class="flex items-center gap-3 mb-4">
                            <h3 class="text-sm font-bold text-slate-700">{{ groupName }}</h3>
                            <div class="h-px flex-1 bg-slate-200"></div>
                            <span class="text-[10px] font-mono text-slate-400">{{ groupData.length }}</span>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4">
                            <div v-for="site in groupData" :key="site.url" class="site-card group h-24 p-3.5 flex flex-col justify-between cursor-pointer" @click="visitSite(site)">
                                <div class="color-bar" :style="{background: getCategoryColor(site.category)}"></div>
                                <div class="flex items-start gap-3 mt-1">
                                    <img :src="getFavicon(site.url)" @error="handleImageError" class="w-8 h-8 rounded-lg bg-white border border-slate-100 p-0.5 object-contain flex-shrink-0">
                                    <div class="min-w-0 flex-1">
                                        <h4 class="font-bold text-slate-800 text-xs truncate leading-snug group-hover:text-blue-600 transition-colors" :title="site.name">{{ site.name }}</h4>
                                        <p class="text-[10px] text-slate-400 truncate mt-0.5 opacity-80">{{ getDomain(site.url) }}</p>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between mt-2">
                                    <div class="flex gap-1">
                                        <span v-if="site.rank <= 3" class="badge badge-core">Top</span>
                                        <span v-if="site.tags && site.tags.includes('doc')" class="badge badge-doc">Doc</span>
                                        <span v-if="site.tags && site.tags.includes('vpn')" class="badge badge-vpn">Net</span>
                                    </div>
                                    <button @click.stop="deleteSite(site)" class="opacity-0 group-hover:opacity-100 text-slate-300 hover:text-red-500 transition-opacity p-1"><i class="fa-solid fa-trash text-[10px]"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ‰∏ìÊ≥®Ê®°Âºè -->
                <div v-else class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4">
                    <div v-for="site in displaySites" :key="site.url" class="site-card group h-24 p-3.5 flex flex-col justify-between cursor-pointer" @click="visitSite(site)">
                        <div class="color-bar" :style="{background: getCategoryColor(site.category)}"></div>
                        <div class="flex items-start gap-3 mt-1">
                            <img :src="getFavicon(site.url)" @error="handleImageError" class="w-8 h-8 rounded-lg bg-white border border-slate-100 p-0.5 object-contain flex-shrink-0">
                            <div class="min-w-0 flex-1">
                                <h4 class="font-bold text-slate-800 text-xs truncate leading-snug group-hover:text-blue-600" :title="site.name">{{ site.name }}</h4>
                                <p class="text-[10px] text-slate-400 truncate mt-0.5 opacity-80">{{ getDomain(site.url) }}</p>
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-2">
                            <div class="flex gap-1">
                                <span v-if="site.rank <= 3" class="badge badge-core">Top</span>
                                <span v-if="site.tags && site.tags.includes('doc')" class="badge badge-doc">Doc</span>
                                <span v-if="site.tags && site.tags.includes('vpn')" class="badge badge-vpn">Net</span>
                            </div>
                            <button @click.stop="deleteSite(site)" class="opacity-0 group-hover:opacity-100 text-slate-300 hover:text-red-500 transition-opacity p-1"><i class="fa-solid fa-trash text-[10px]"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- macOS È£éÊ†ºÊ®°ÊÄÅÊ°Ü -->
    <transition name="modal">
        <div v-if="showModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-sm p-4">
            <div class="bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-md p-6 border border-gray-200/50" @click.stop>
                <div class="flex justify-between items-center mb-5">
                    <h3 class="text-sm font-bold text-slate-800 uppercase tracking-wider">Êñ∞Â¢ûÊï∞Â≠óËµÑ‰∫ß</h3>
                    <button @click="closeModal" class="text-slate-400 hover:text-slate-600"><i class="fa-solid fa-xmark"></i></button>
                </div>
                <!-- AI Smart Add -->
                <div class="mb-5 bg-indigo-50 p-3 rounded-lg border border-indigo-100/50">
                    <div class="flex gap-2">
                        <input v-model="smartInput" @keyup.enter="smartParse" type="text" class="flex-1 bg-transparent text-xs outline-none text-indigo-900 placeholder-indigo-300" placeholder="Á≤òË¥¥‰ªªÊÑèÊñáÊú¨ÔºåAI Ëá™Âä®ÂΩíÁ±ª...">
                        <button @click="smartParse" :disabled="isProcessing" class="text-indigo-600 hover:text-indigo-800 text-xs font-bold disabled:opacity-50">
                            <i v-if="isProcessing" class="fa-solid fa-circle-notch fa-spin"></i> <span v-else>ËØÜÂà´</span>
                        </button>
                    </div>
                </div>
                <div class="space-y-4">
                    <input v-model="newSite.name" class="w-full p-3 bg-gray-50/50 border border-gray-200 rounded-xl text-sm focus:border-blue-500 focus:bg-white outline-none transition-all" placeholder="ËµÑ‰∫ßÂêçÁß∞">
                    <input v-model="newSite.url" class="w-full p-3 bg-gray-50/50 border border-gray-200 rounded-xl text-sm focus:border-blue-500 focus:bg-white outline-none transition-all" placeholder="URL Âú∞ÂùÄ">
                    <select v-model="newSite.category" class="w-full p-3 bg-gray-50/50 border border-gray-200 rounded-xl text-sm focus:border-blue-500 outline-none">
                        <option v-for="cat in flatCategories" :value="cat.id">{{ cat.name }}</option>
                    </select>
                </div>
                <div class="flex gap-3 mt-6">
                    <button @click="closeModal" class="macos-btn flex-1 py-2.5 text-sm">ÂèñÊ∂à</button>
                    <button @click="addSite" class="macos-btn macos-btn-primary flex-1 py-2.5 text-sm">Á°ÆËÆ§Ê∑ªÂä†</button>
                </div>
            </div>
        </div>
    </transition>

    <transition name="modal">
        <div v-if="showAnalysisModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-sm p-4">
            <div class="bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-4xl h-[75vh] flex flex-col p-8 border border-gray-200/50" @click.stop>
                <div class="flex justify-between items-center mb-4 border-b pb-3">
                    <h3 class="text-sm font-bold text-slate-800"><i class="fa-solid fa-wand-magic-sparkles text-purple-600 mr-2"></i>ËµÑ‰∫ßÁªìÊûÑÂàÜÊûê</h3>
                    <button @click="closeAnalysisModal" class="text-slate-400 hover:text-slate-600"><i class="fa-solid fa-xmark"></i></button>
                </div>
                <div class="flex-1 overflow-y-auto custom-scroll prose prose-sm max-w-none p-2 text-slate-600">
                    <div v-if="!analysisResult && !isAnalyzing" class="text-center mt-20 text-slate-400">
                        <i class="fa-solid fa-brain text-5xl mb-4 text-purple-200"></i>
                        <p>AI Â∞ÜÂü∫‰∫é MECE ÂéüÂàôÂàÜÊûêÊÇ®ÁöÑÂ∑•ÂÖ∑Ê†àË¶ÜÁõñÂ∫¶‰∏éÁº∫Â§±„ÄÇ</p>
                    </div>
                    <div v-if="isAnalyzing" class="flex flex-col items-center justify-center mt-20 text-purple-600">
                        <i class="fa-solid fa-circle-notch fa-spin text-2xl mb-3"></i>
                        <p class="text-xs">Deep Thinking...</p>
                    </div>
                    <div v-if="analysisResult" v-html="safeRenderMarkdown(analysisResult)"></div>
                </div>
                <div class="mt-4 pt-3 border-t flex justify-end">
                    <button @click="analyzeAssets" :disabled="isAnalyzing" class="px-5 py-2 bg-purple-600 text-white rounded-lg text-xs font-bold hover:bg-purple-700 shadow-lg shadow-purple-200">ÂºÄÂßãÂàÜÊûê</button>
                </div>
            </div>
        </div>
    </transition>

    <transition name="modal">
        <div v-if="showSettingsModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/20 backdrop-blur-sm p-4">
            <div class="bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-md p-6 border border-gray-200/50" @click.stop>
                <h3 class="text-base font-semibold text-gray-900 mb-5">API ÈÖçÁΩÆ</h3>
                <input v-model="tempApiKey" type="password" class="w-full p-3 bg-gray-50/50 border border-gray-200 rounded-xl text-sm focus:border-blue-500 outline-none font-mono" placeholder="sk-...">
                <div class="flex justify-end gap-3 mt-6">
                    <button @click="showSettingsModal = false" class="macos-btn px-5 py-2 text-sm">ÂèñÊ∂à</button>
                    <button @click="saveSettings" class="macos-btn macos-btn-primary px-5 py-2 text-sm">‰øùÂ≠ò</button>
                </div>
            </div>
        </div>
    </transition>

</div>

<script>
const { createApp, ref, computed, onMounted } = Vue;

// ----------------------------------------------------------------
// MECE ÂàÜÁ±ª‰ΩìÁ≥ª v5.3 (‰∏ì‰∏ö/ÈÄöÁî®ËßÑÂàô‰ºòÂåñ)
// ----------------------------------------------------------------
const CATEGORY_STRUCTURE = [
    {
        groupName: "üèõÔ∏è ÁªèËê•ÂÜ≥Á≠ñ (Executive)",
        icon: "fa-solid fa-briefcase",
        items: [
            { id: "biz_ops", name: "ÂÜÖÈÉ®ÂçèÂêå & Á≥ªÁªü", color: "#2563eb" }, 
            { id: "biz_data", name: "BI Êä•Ë°® & ÁõëÊéß", color: "#dc2626" },
            { id: "biz_ext", name: "ÁõëÁÆ° & Â∏ÇÂú∫ÊÉÖÊä•", color: "#b91c1c" }
        ]
    },
    {
        groupName: "üß† Êô∫ËÉΩ‰Ωì (AI Matrix)",
        icon: "fa-solid fa-brain",
        items: [
            { id: "ai_chat", name: "ÂâçÊ≤ø SOTA Ê®°Âûã", color: "#8b5cf6" },
            { id: "ai_cn", name: "ÂõΩ‰∫ßÂ§ßÊ®°Âûã", color: "#7c3aed" },
            { id: "ai_search", name: "Deep Search & Agent", color: "#6d28d9" }
        ]
    },
    {
        groupName: "‚öôÔ∏è ÂºÄÂèëËÄÖ (Dev Studio)",
        icon: "fa-solid fa-code",
        items: [
            { id: "dev_ide", name: "‰∫ëÁ´Ø IDE & ËæÖÂä©", color: "#10b981" },
            { id: "dev_api", name: "Ê®°Âûã API ÁÆ°ÁêÜ", color: "#059669" },
            { id: "dev_infra", name: "ÂÖ®Ê†à‰∫ëÂü∫Âª∫", color: "#047857" },
            { id: "dev_mcp", name: "MCP ÁîüÊÄÅÂçèËÆÆ", color: "#065f46" }
        ]
    },
    {
        groupName: "üé® ÂàõÊÑèÊµÅ (Creative)",
        icon: "fa-solid fa-palette",
        items: [
            { id: "create_vision", name: "ËßÜËßâ & ËßÜÈ¢ëÊµÅ", color: "#f59e0b" },
            { id: "create_design", name: "‰∫§‰∫í & ÂèØËßÜÂåñ", color: "#d97706" }
        ]
    },
    {
        groupName: "üìö Áü•ËØÜ‰ΩìÁ≥ª (Knowledge)",
        icon: "fa-solid fa-graduation-cap",
        items: [
            { id: "know_research", name: "Â≠¶ÊúØÁßëÁ†î (Research)", color: "#0f172a" },
            { id: "know_mgmt", name: "Á¨¨‰∫åÂ§ßËÑë (Notes)", color: "#334155" },
            { id: "know_learn", name: "ÁªàË∫´Â≠¶‰π† (Edu)", color: "#475569" },
            { id: "know_ref", name: "ÂèÇËÄÉËµÑÊñô (Ref)", color: "#64748b" }
        ]
    },
    {
        groupName: "üõ†Ô∏è ÊïàËÉΩÂü∫Âª∫ (Infrastructure)",
        icon: "fa-solid fa-screwdriver-wrench",
        items: [
            { id: "tool_collab", name: "ÂçèÂêåÈÄöËÆØ (Collab)", color: "#2563eb" },
            { id: "tool_office", name: "ÂäûÂÖ¨‰∏éÊï∞ÊçÆ (Office)", color: "#0ea5e9" },
            { id: "tool_net", name: "ÁΩëÁªú‰∏éË¥¶Êà∑ (Net)", color: "#6366f1" },
            { id: "my_works", name: "‰∏™‰∫∫ÂèëÂ∏É (Deploy)", color: "#ec4899" }
        ]
    }
];

// ----------------------------------------------------------------
// ÂÖ®ÈáèÊï∞ÊçÆ + Âú∫ÊôØÂåñÊùÉÈáç (Rank: 1=Highest)
// ----------------------------------------------------------------
const PARSED_DATA = [
    // --- 1.1 ÂÜÖÈÉ®ÂçèÂêå (biz_ops) ---
    { name: "‰ºÅÂæÆÊñáÊ°£", url: "https://doc.weixin.qq.com/home/recent", category: "biz_ops", rank: 1, tags: ["doc"] },
    { name: "ÈÇÆ‰ª∂Á≥ªÁªü", url: "https://webmail.sinosafe.com.cn/coremail/XT/index.jsp", category: "biz_ops", rank: 2 },
    { name: "OneDrive", url: "https://onedrive.live.com/", category: "biz_ops", rank: 3, tags: ["doc"] },
    { name: "OA ÂäûÂÖ¨Á≥ªÁªü", url: "http://oa.sinosafe.com.cn/login.jsp", category: "biz_ops", rank: 4 },
    { name: "ËΩ¶Èô©Ê†∏ÂøÉ", url: "http://auto.sinosafe.com.cn/index.jsp", category: "biz_ops", rank: 5 },
    { name: "ÁîµÈîÄ CRM", url: "https://crm.sinosafe.com.cn/", category: "biz_ops", rank: 6 },
    { name: "ÂèçÊ¥óÈí±Â∑•‰ΩúÂè∞", url: "http://amlnew.sinosafe.com.cn/#/work-support/report-work/report-check", category: "biz_ops", rank: 7 },
    { name: "‰ºÅÂ§ßÂüπËÆ≠Âπ≥Âè∞", url: "http://nclm.qida.com/#taskInput?id=200073745", category: "biz_ops", rank: 8 },
    { name: "Âà†ÈÇÆ‰ª∂ÂÖ•Âè£", url: "https://webmail.sinosafe.com.cn/coremail/XT/index.jsp?sid=CAdLwXbbpKJeMFSEXHIsOLJvgmytvowb#mail.list|%7B%22fid%22%3A1%7D", category: "biz_ops", rank: 9 },

    // --- 1.2 Êï∞ÊçÆÂÜ≥Á≠ñ (biz_data) ---
    { name: "ÁªèËê•ÂÜ≥Á≠ñÁ≥ªÁªü", url: "http://iap.sinosafe.com.cn/#/analysisdor/analysis/countAnalysis", category: "biz_data", rank: 1 },
    { name: "FineBI Êä•Ë°®Âπ≥Âè∞", url: "http://bi.sinosafe.com.cn/", category: "biz_data", rank: 2 },
    { name: "Áª≠‰øùÁõëÊéß", url: "http://bi.sinosafe.com.cn/decision/link/rVYp", category: "biz_data", rank: 3 },
    { name: "Êä•‰ª∑ËøΩË∏™Ë°®", url: "http://bi.sinosafe.com.cn/decision/link/TQlh", category: "biz_data", rank: 4 },
    { name: "Â§öÁª¥ËΩ¶Èô©ÊàêÊú¨", url: "https://bi.sinosafe.com.cn/decision#/analysis/own/subject/ea63ccdc862c49f1913cdc9015c6b439/report/7a387f2817e84788bdd004cd6bafc36d", category: "biz_data", rank: 5 },
    { name: "È©æÊÑèÈô©ËΩ¨ÂåñÁéá", url: "http://bi.sinosafe.com.cn/decision/link/jgXN", category: "biz_data", rank: 6 },
    { name: "Ë¥ßËΩ¶È£éÈô©ËØÑÂàÜ", url: "https://risk.deltaentropy.com/#/ds", category: "biz_data", rank: 7 },
    { name: "ËΩ¨Áª≠‰øùÊä•‰ª∑", url: "http://bi.sinosafe.com.cn/decision/link/Xl80", category: "biz_data", rank: 8 },
    { name: "Ëµî‰ªòÁéáÂàÜÊûê", url: "https://bi.sinosafe.com.cn/decision#/analysis/own/subject/16b7474a1e12452d9ea4736d8db40c9f/report/3435b9d091f14b768de286da4030b614", category: "biz_data", rank: 9 },
    { name: "Êâø‰øùÊ∏ÖÂçïËßÑËåÉ", url: "https://gemini.google.com/share/c88b3a1f1d2c", category: "biz_data", rank: 10, tags: ["doc"] },
    { name: "FineChatBI ÊåáÂºï", url: "https://help.fanruan.com/finebi/doc-view-2580.html", category: "biz_data", rank: 11, tags: ["doc"] },
    { name: "Â∫îÁî®Â§çÁî®Âä©Êâã", url: "https://robot.fanruan.com/chat/app", category: "biz_data", rank: 12 },

    // --- 1.3 Â§ñÈÉ®ÊÉÖÊä• (biz_ext) ---
    { name: "ÂõõÂ∑ùÈáëËûçÁõëÁÆ°Â±Ä", url: "https://dfjrjgj.sc.gov.cn/scdfjrjgj/jgdt/2024/2/6/377dc9e8905942acbe10da1b5143a10e.shtml", category: "biz_ext", rank: 1 },
    { name: "ÂçóÂÖÖÊîøÂ∫úÊï∞ÊçÆ", url: "https://www.nanchong.gov.cn/data/catalog/details.html?id=156619", category: "biz_ext", rank: 2 },
    { name: "ÁΩëÁ´ôÂÖ¨ÂÆâÂ§áÊ°à", url: "https://beian.mps.gov.cn/web/business/businessHome/draft", category: "biz_ext", rank: 3 },
    { name: "Ê±ΩËΩ¶‰πãÂÆ∂-Êñ∞ËÉΩÊ∫ê", url: "https://ev.autohome.com.cn/", category: "biz_ext", rank: 4 },
    { name: "ÁìúÂ≠ê‰∫åÊâãËΩ¶", url: "https://gz.guazi.com/", category: "biz_ext", rank: 5 },
    { name: "Âç°ËΩ¶‰πãÂÆ∂", url: "https://product.360che.com/", category: "biz_ext", rank: 6 },
    { name: "Êë©ÊâòËΩ¶‰πãÂÆ∂", url: "https://www.newmotor.com.cn/", category: "biz_ext", rank: 7 },

    // --- 2.1 ÂâçÊ≤øÊ®°Âûã (ai_chat) ---
    { name: "DeepSeek ÂÆòÁΩë", url: "https://chat.deepseek.com/", category: "ai_chat", rank: 1 },
    { name: "ChatGPT", url: "https://chatgpt.com/?oai-dm=1", category: "ai_chat", rank: 2 },
    { name: "Claude AI", url: "https://claude.ai/", category: "ai_chat", rank: 3 },
    { name: "Gemini", url: "https://gemini.google.com/app", category: "ai_chat", rank: 4 },
    { name: "Grok", url: "https://grok.com/", category: "ai_chat", rank: 5 },
    { name: "LMArena Á´ûÊäÄÂú∫", url: "https://lmarena.ai/", category: "ai_chat", rank: 6 },
    { name: "Qwen", url: "https://chat.qwen.ai/", category: "ai_chat", rank: 7 },
    { name: "Jules", url: "https://jules.google.com/task", category: "ai_chat", rank: 8 },
    { name: "Aiswers (Â§öAI)", url: "https://www.aiswers.com/bot/chatgpt", category: "ai_chat", rank: 9 },
    { name: "Google AI Labs", url: "https://labs.google/", category: "ai_chat", rank: 10 },

    // --- 2.2 ÂõΩ‰∫ßÂ§ßÊ®° (ai_cn) ---
    { name: "Kimi Êô∫ËÉΩÂä©Êâã", url: "https://kimi.moonshot.cn/", category: "ai_cn", rank: 1 },
    { name: "Êô∫Ë∞±Ê∏ÖË®Ä", url: "https://chatglm.cn/", category: "ai_cn", rank: 2 },
    { name: "ËÖæËÆØÂÖÉÂÆù", url: "https://yuanbao.tencent.com/", category: "ai_cn", rank: 3 },
    { name: "ÈÄö‰πâÂê¨ÊÇü", url: "https://tingwu.aliyun.com/home", category: "ai_cn", rank: 4 },
    { name: "Gemini 3.0 Pro (È£û‰π¶)", url: "https://kcnj7yazgs86.feishu.cn/wiki/NTsQw69bYiPtgzkHyy7cZRurn1O", category: "ai_cn", rank: 5 },
    { name: "ÊñáÂøÉ‰∏ÄË®Ä", url: "https://yiyan.baidu.com/promptCenter", category: "ai_cn", rank: 6 },
    { name: "Ë∂ÖÁÆó-DeepSeek", url: "https://chat.scnet.cn/", category: "ai_cn", rank: 7 },
    { name: "Êô∫ÊôÆAI", url: "https://chat.z.ai/", category: "ai_cn", rank: 8 },
    { name: "Â§©Â∑• AI", url: "https://skywork.ai/", category: "ai_cn", rank: 9 },

    // --- 2.3 Êô∫ËÉΩÊêúÁ¥¢ & Agent (ai_search) ---
    { name: "Genspark Agents", url: "https://www.genspark.ai/agents", category: "ai_search", rank: 1 },
    { name: "ÁßòÂ°î AI ÊêúÁ¥¢", url: "https://metaso.cn/", category: "ai_search", rank: 2 },
    { name: "Á∫≥Á±≥ AI ÊêúÁ¥¢", url: "https://www.n.cn/", category: "ai_search", rank: 3 },
    { name: "Coze (Êâ£Â≠ê)", url: "https://www.coze.cn/space-preview", category: "ai_search", rank: 4 },
    { name: "Flowith ÊÄùÁª¥Èìæ", url: "https://flowith.io/", category: "ai_search", rank: 5 },
    { name: "Áü•‰πéÁõ¥Á≠î", url: "https://zhida.zhihu.com/", category: "ai_search", rank: 6 },
    { name: "AI Agents Â∫ì", url: "https://waytoagi.feishu.cn/wiki/GFS0wJB78izVBmk3LVgcCn2MnCh", category: "ai_search", rank: 7 },
    { name: "Vinsoo ‰∫ëAgent", url: "https://www.aiyouthlab.com/", category: "ai_search", rank: 8 },
    { name: "MiniMax Agent", url: "https://agent.minimax.io/", category: "ai_search", rank: 9 },
    { name: "PromptPilot", url: "https://promptpilot.volcengine.com/home", category: "ai_search", rank: 10 },
    { name: "SearchPromptly", url: "https://searchpromptly.com/", category: "ai_search", rank: 11 },
    { name: "PromptMuse", url: "https://promptmuse.net/", category: "ai_search", rank: 12 },

    // --- 3.1 ‰∫ëÁ´Ø IDE (dev_ide) ---
    { name: "Cursor Agents", url: "https://cursor.com/cn/agents", category: "dev_ide", rank: 1 },
    { name: "Claude Code", url: "https://claude.ai/code", category: "dev_ide", rank: 2 },
    { name: "Replit", url: "https://replit.com/", category: "dev_ide", rank: 3 },
    { name: "Vercel v0", url: "https://v0.dev/", category: "dev_ide", rank: 4 },
    { name: "Bolt.new", url: "https://bolt.new/", category: "dev_ide", rank: 5 },
    { name: "Google IDX", url: "https://idx.google.com/", category: "dev_ide", rank: 6 },
    { name: "Lovable", url: "https://lovable.dev/", category: "dev_ide", rank: 7 },
    { name: "Manus", url: "https://manus.im/app", category: "dev_ide", rank: 8 },
    { name: "Zoer DBÁºñÁ®ã", url: "https://zoer.ai/", category: "dev_ide", rank: 9 },
    { name: "Colaboratory", url: "https://colab.research.google.com/", category: "dev_ide", rank: 10 },
    { name: "Text Editor", url: "https://texteditor.co/", category: "dev_ide", rank: 11 },
    { name: "CopyCoder", url: "https://copycoder.ai/", category: "dev_ide", rank: 12 },
    { name: "App Gen", url: "https://appgen.groqlabs.com/", category: "dev_ide", rank: 13 },
    { name: "Learn Cursor", url: "https://cursor.directory/learn", category: "dev_ide", rank: 14, tags: ["doc"] },
    { name: "Windsurf ÊñáÊ°£", url: "https://docs.codeium.com/windsurf", category: "dev_ide", rank: 15, tags: ["doc"] },

    // --- 3.2 Ê®°Âûã API (dev_api) ---
    { name: "DeepSeek API", url: "https://platform.deepseek.com/usage", category: "dev_api", rank: 1 },
    { name: "OpenRouter", url: "https://openrouter.ai/chat", category: "dev_api", rank: 2 },
    { name: "Google AI Studio", url: "https://aistudio.google.com/", category: "dev_api", rank: 3 },
    { name: "Á°ÖÂü∫ÊµÅÂä® API", url: "https://cloud.siliconflow.cn/account/ak", category: "dev_api", rank: 4 },
    { name: "ÈòøÈáå‰∫ëÁôæÁÇº", url: "https://bailian.console.aliyun.com/", category: "dev_api", rank: 5 },
    { name: "Êô∫Ë∞±ÂºÄÊîæÂπ≥Âè∞", url: "https://open.bigmodel.cn/", category: "dev_api", rank: 6 },
    { name: "Exa API", url: "https://dashboard.exa.ai/", category: "dev_api", rank: 7 },
    { name: "OpenRouter Keys", url: "https://openrouter.ai/settings/keys", category: "dev_api", rank: 8 },
    { name: "ÁÅ´Â±±ÂºïÊìéÁôªÂΩï", url: "https://console.volcengine.com/", category: "dev_api", rank: 9 },

    // --- 3.3 ‰∫ëÂü∫Âª∫ (dev_infra) ---
    { name: "GitHub", url: "https://github.com/", category: "dev_infra", rank: 1 },
    { name: "Cloudflare", url: "https://dash.cloudflare.com/", category: "dev_infra", rank: 2 },
    { name: "ÈòøÈáå‰∫ëÊúçÂä°Âô®", url: "https://myaccount.console.aliyun.com/", category: "dev_infra", rank: 3 },
    { name: "ËÖæËÆØ‰∫ëËΩªÈáè‰∫ë", url: "https://console.cloud.tencent.com/lighthouse/", category: "dev_infra", rank: 4 },
    { name: "Supabase", url: "https://supabase.com/", category: "dev_infra", rank: 5 },
    { name: "Firebase Hosting", url: "https://firebase.google.com/docs/hosting", category: "dev_infra", rank: 6 },
    { name: "Firebase Console", url: "https://console.firebase.google.com/", category: "dev_infra", rank: 7 },
    { name: "MemFire Cloud", url: "https://cloud.memfiredb.com/", category: "dev_infra", rank: 8 },
    { name: "MemFire Editor", url: "https://d40alqog91htqli3t530.baseapi.memfiredb.com/project/default/editor", category: "dev_infra", rank: 9 },
    { name: "MemFire ËÆ§ËØÅ", url: "https://cloud.memfiredb.com/setting/certification", category: "dev_infra", rank: 10 },
    { name: "ICP Â§áÊ°à", url: "https://console.cloud.tencent.com/beian", category: "dev_infra", rank: 11 },
    { name: "Webify", url: "https://webify.cloudbase.net/", category: "dev_infra", rank: 12 },
    { name: "Git GUI", url: "https://git-scm.com/downloads/guis", category: "dev_infra", rank: 13 },
    { name: "ËÖæËÆØ‰∫ëÊñáÊ°£", url: "https://cloud.tencent.com/document/product/213/2936", category: "dev_infra", rank: 14, tags: ["doc"] },
    { name: "ËÖæËÆØ‰∫ëÊîØÊåÅ", url: "https://cloud.tencent.com/online-service", category: "dev_infra", rank: 15 },

    // --- 3.4 MCP ÁîüÊÄÅ (dev_mcp) ---
    { name: "MCP Servers (Glama)", url: "https://glama.ai/mcp/servers", category: "dev_mcp", rank: 1 },
    { name: "È≠îÊê≠Á§æÂå∫ MCP", url: "https://modelscope.cn/mcp", category: "dev_mcp", rank: 2 },
    { name: "MCP ÂÆûÈ™åÂú∫", url: "https://www.modelscope.cn/mcp/playground", category: "dev_mcp", rank: 3 },
    { name: "MCP.so", url: "https://mcp.so/zh", category: "dev_mcp", rank: 4 },
    { name: "Cursor MCP Docs", url: "https://cursor.directory/mcp", category: "dev_mcp", rank: 5, tags: ["doc"] },
    { name: "Claude MCP Docs", url: "https://docs.anthropic.com/zh-CN/docs/claude-code/mcp", category: "dev_mcp", rank: 6, tags: ["doc"] },
    { name: "VS Code MCP", url: "https://code.visualstudio.com/mcp", category: "dev_mcp", rank: 7 },

    // --- 4.1 ËßÜËßâ‰∏éËßÜÈ¢ë (create_vision) ---
    { name: "Midjourney", url: "https://discord.com/", category: "create_vision", rank: 1 },
    { name: "ÂèØÁÅµ AI (Kling)", url: "https://app.klingai.com/", category: "create_vision", rank: 2 },
    { name: "Hailuo AI (Êµ∑Ëû∫)", url: "https://hailuoai.video/", category: "create_vision", rank: 3 },
    { name: "Recraft (SVG)", url: "https://www.recraft.ai/", category: "create_vision", rank: 4 },
    { name: "Flux Playground", url: "https://playground.bfl.ai/", category: "create_vision", rank: 5 },
    { name: "ÊòüÊµÅ Art", url: "https://www.xingliu.art/", category: "create_vision", rank: 6 },
    { name: "Hunyuan 3D", url: "https://3d.hunyuan.tencent.com/", category: "create_vision", rank: 7 },
    { name: "ËÖæËÆØÊ∑∑ÂÖÉÂõæ", url: "https://hunyuan.tencent.com/", category: "create_vision", rank: 8 },
    { name: "Flow (Google)", url: "https://labs.google/fx/tools/flow", category: "create_vision", rank: 9 },
    { name: "SVG Âú®Á∫øÁºñËæë", url: "https://www.jyshare.com/more/svgeditor/", category: "create_vision", rank: 10 },
    { name: "Tldraw (Áîª‰∏ÄÂàá)", url: "https://computer.tldraw.com/", category: "create_vision", rank: 11 },

    // --- 4.2 ‰∫§‰∫í‰∏éÂ±ïÁ§∫ (create_design) ---
    { name: "Napkin.ai", url: "https://app.napkin.ai/", category: "create_design", rank: 1 },
    { name: "Figma", url: "https://www.figma.com/", category: "create_design", rank: 2 },
    { name: "AiPPT", url: "https://www.aippt.cn/", category: "create_design", rank: 3 },
    { name: "G2Plot ÂõæË°®Â∫ì", url: "https://g2plot.antv.antgroup.com/manual/plots/heatmap", category: "create_design", rank: 4, tags: ["doc"] },
    { name: "ChartCube", url: "https://chartcube.alipay.com/guide", category: "create_design", rank: 5 },
    { name: "ElevenLabs (Èü≥)", url: "https://elevenlabs.io/", category: "create_design", rank: 6 },
    { name: "MiniMax Audio", url: "https://www.minimax.io/audio", category: "create_design", rank: 7 },
    { name: "Google Sttich", url: "https://stitch.withgoogle.com/", category: "create_design", rank: 8 },
    { name: "Whisk (FX)", url: "https://labs.google/fx/tools/whisk", category: "create_design", rank: 9 },
    { name: "Lovart", url: "https://www.lovart.ai/", category: "create_design", rank: 10 },
    { name: "Google PPT", url: "https://docs.google.com/presentation/", category: "create_design", rank: 11 },
    { name: "‰ª£Á†ÅÂèòÁΩëÈ°µ", url: "https://www.yourware.so/", category: "create_design", rank: 12 },
    { name: "DeepSite (HF)", url: "https://huggingface.co/spaces/enzostvs/deepsite", category: "create_design", rank: 13 },
    { name: "Ëá™Áî±ÁîªÂ∏É", url: "https://wenku.baidu.com/board", category: "create_design", rank: 14 },

    // --- 5.1 Â≠¶ÊúØÁßëÁ†î (know_research) - Á¨¨‰∏ÄÊÄßÂéüÁêÜÊ∫êÂ§¥ ---
    { name: "Google Scholar", url: "https://scholar.google.com/", category: "know_research", rank: 1 },
    { name: "Arxiv Papers", url: "https://arxiv.org/", category: "know_research", rank: 2 },
    { name: "Web of Science", url: "https://clarivate.com/products/web-of-science/", category: "know_research", rank: 3 },
    { name: "Scopus", url: "https://www.scopus.com/", category: "know_research", rank: 4 },
    { name: "IEEE Xplore", url: "https://ieeexplore.ieee.org/", category: "know_research", rank: 5 },
    { name: "ScienceDirect", url: "https://www.sciencedirect.com/", category: "know_research", rank: 6 },
    { name: "PubMed", url: "https://pubmed.ncbi.nlm.nih.gov/", category: "know_research", rank: 7 },
    { name: "AI ÊêúËÆ∫Êñá (iFlow)", url: "https://iflow.cn/", category: "know_research", rank: 8 },
    { name: "Âàõ‰ΩúËÆ∫Êñá (Storm)", url: "https://storm.genie.stanford.edu/", category: "know_research", rank: 9 },

    // --- 5.2 Á¨¨‰∫åÂ§ßËÑë (know_mgmt) - ÂÜÖÂåñ ---
    { name: "Notion", url: "https://www.notion.so/", category: "know_mgmt", rank: 1 },
    { name: "NotebookLM", url: "https://notebooklm.google.com/", category: "know_mgmt", rank: 2 },
    { name: "È£û‰π¶‰∫ëÊñáÊ°£", url: "https://fxu5r7nfzg.feishu.cn/", category: "know_mgmt", rank: 3, tags: ["doc"] },
    { name: "ÂæóÂà∞AIÁ¨îËÆ∞", url: "https://www.biji.com/note", category: "know_mgmt", rank: 4 },

    // --- 5.3 ÁªàË∫´Â≠¶‰π† (know_learn) - ÊäÄËÉΩ ---
    { name: "ÂæóÂà∞ APP", url: "https://www.dedao.cn/", category: "know_learn", rank: 1 },
    { name: "ÂæÆ‰ø°ËØª‰π¶", url: "https://weread.qq.com/", category: "know_learn", rank: 2 },
    { name: "Ê∑∑Ê≤åÂ§ßÂ≠¶", url: "https://b.hundun.cn/", category: "know_learn", rank: 3 },
    { name: "Bilibili", url: "https://www.bilibili.com/", category: "know_learn", rank: 4 },
    { name: "YouTube", url: "https://www.youtube.com/", category: "know_learn", rank: 5 },
    { name: "Google Books", url: "https://books.google.com.hk/?hl=zh-CN", category: "know_learn", rank: 6 },
    { name: "Â∞èÈπÖÈÄö", url: "https://xueyuan.xiaoe-tech.com/", category: "know_learn", rank: 7 },
    { name: "ÈùíÂ∞ëÂπ¥AIÁ¥†ÂÖª", url: "https://e.aice.org.cn/", category: "know_learn", rank: 8 },
    { name: "È£éÂèòÁºñÁ®ã", url: "https://www.pypypy.cn/", category: "know_learn", rank: 9 },

    // --- 5.4 ÂèÇËÄÉËµÑÊñô (know_ref) ---
    { name: "Áé∞‰ª£Ê±âËØ≠ËØçÂÖ∏", url: "https://cidian.gushici.net/", category: "know_ref", rank: 1 },
    { name: "Â≠ó‰ΩìÂ§©‰∏ã", url: "https://www.fonts.net.cn/", category: "know_ref", rank: 2 },

    // --- 6.1 ÂçèÂêåÈÄöËÆØ (tool_collab) ---
    { name: "Gmail", url: "https://mail.google.com/", category: "tool_collab", rank: 1 },
    { name: "Outlook", url: "https://outlook.live.com/", category: "tool_collab", rank: 2 },
    { name: "Slack", url: "https://app.slack.com/", category: "tool_collab", rank: 3 },
    { name: "ÂÖ¨‰ºóÂè∑ÊñáÁ´†", url: "https://mp.weixin.qq.com/cgi-bin/home", category: "tool_collab", rank: 4 },

    // --- 6.2 ÂäûÂÖ¨‰∏éÊï∞ÊçÆ (tool_office) ---
    { name: "ProcessOn", url: "https://www.processon.com/", category: "tool_office", rank: 1 },
    { name: "ÈáëÂ±±ÊñáÊ°£", url: "https://www.kdocs.cn/", category: "tool_office", rank: 2 },
    { name: "TableConvert", url: "https://tableconvert.com/", category: "tool_office", rank: 3 },
    { name: "n8n Ëá™Âä®Âåñ", url: "https://app.n8n.cloud/", category: "tool_office", rank: 4 },
    { name: "WPS ËÑöÊú¨ÊåáÂçó", url: "https://365.kdocs.cn/l/cuUFLE0Ufojw", category: "tool_office", rank: 5, tags: ["doc"] },
    { name: "Âú®Á∫ø PDF ËΩ¨Êç¢", url: "https://pdf2000.com/", category: "tool_office", rank: 6 },
    { name: "Èó™Âáª PPT", url: "https://ppt.sankki.com/", category: "tool_office", rank: 7 },
    { name: "ÂÖçË¥πÊä†Âõæ", url: "https://pixian.ai/", category: "tool_office", rank: 8 },
    { name: "ÈóÆÂç∑ÁΩë", url: "https://www.wenjuan.com/", category: "tool_office", rank: 9 },
    { name: "Tushare Êï∞ÊçÆ", url: "https://tushare.pro/", category: "tool_office", rank: 10 },
    { name: "Cretvalu", url: "https://cretvalu.com/", category: "tool_office", rank: 11 },
    { name: "Context.ai", url: "https://www.context.ai/", category: "tool_office", rank: 12 },
    { name: "AIToolX", url: "https://aitoolx.cn/", category: "tool_office", rank: 13 },

    // --- 6.3 ÁΩëÁªú‰∏éË¥¶Êà∑ (tool_net) ---
    { name: "Google One", url: "https://one.google.com/", category: "tool_net", rank: 1 },
    { name: "JustMySocks", url: "https://justmysocks.net/", category: "tool_net", rank: 2, tags: ["vpn"] },
    { name: "IP Ê≥ÑÈú≤Ê£ÄÊµã", url: "https://ipleak.net/", category: "tool_net", rank: 3 },
    { name: "Gemini CLI", url: "https://geminicli.com/extensions/", category: "tool_net", rank: 4 },
    { name: "reCAPTCHA", url: "https://www.google.com/recaptcha/admin", category: "tool_net", rank: 5 },
    { name: "ËÖæËÆØÂú®Á∫øÂ∑•ÂÖ∑", url: "https://tool.browser.qq.com/", category: "tool_net", rank: 6 },
    { name: "Èò≥ÂÖâÂºÄÂ•ñ", url: "https://www.cwl.gov.cn/", category: "tool_net", rank: 7 },

    // --- 6.4 ‰∏™‰∫∫ÂèëÂ∏É (my_works) ---
    { name: "Markdown ËΩ¨ Excel", url: "https://alongor666.github.io/Table_Forge/", category: "my_works", rank: 1 },
    { name: "ËΩ¶Èô©ÁªèËê•ÂàÜÊûêÂë®Êä•", url: "https://autinsight.web.app/", category: "my_works", rank: 2 },
    { name: "Êë©ÊâòËΩ¶ÊàêÊú¨Ê®°Âûã", url: "https://alongor666.github.io/moto_cost/", category: "my_works", rank: 3 },
    { name: "ÂèØÁª≠ÊúüÊü•ËØ¢", url: "https://alongor666.github.io/Fee-re/", category: "my_works", rank: 4 },
    { name: "ÊèíÊ∑∑ËΩ¶ÂûãÂèØËßÜÂåñ", url: "http://127.0.0.1:5501/%E8%BD%A6%E5%9E%8B.html", category: "my_works", rank: 5 },
    { name: "GenAI Èó™Âç°", url: "https://019a84ee-d564-7826-8aef-953b787e589f.arena.site/", category: "my_works", rank: 6 },
    { name: "Gemini Proxy", url: "https://gemini-proxy.alongor0512.workers.dev/", category: "my_works", rank: 7 },
    { name: "ACL4SSR ËÆ¢ÈòÖ", url: "https://acl4ssr-sub.github.io/", category: "my_works", rank: 8 },
    { name: "Google ÁΩëÁ´ô", url: "https://sites.google.com/", category: "my_works", rank: 9 }
];

createApp({
    setup() {
        // Âä†ÂØÜÂ≠òÂÇ®Â∑•ÂÖ∑
        const secureStorage = {
            // ÁîüÊàêÂõ∫ÂÆöÂØÜÈí•ÔºàÂÆûÈôÖÈ°πÁõÆ‰∏≠Â∫î‰ªéÁî®Êà∑ËæìÂÖ•ÊàñÂÆâÂÖ®‰∏ä‰∏ãÊñáËé∑ÂèñÔºâ
            getSecretKey: () => {
                let key = localStorage.getItem('storage_key');
                if (!key) {
                    key = CryptoJS.lib.WordArray.random(256/8).toString();
                    localStorage.setItem('storage_key', key);
                }
                return key;
            },

            // Âä†ÂØÜÊï∞ÊçÆ
            encrypt: (data) => {
                try {
                    const encrypted = CryptoJS.AES.encrypt(data, secureStorage.getSecretKey()).toString();
                    return encrypted;
                } catch (e) {
                    console.error('Encryption failed:', e);
                    return null;
                }
            },

            // Ëß£ÂØÜÊï∞ÊçÆ
            decrypt: (encryptedData) => {
                try {
                    const decrypted = CryptoJS.AES.decrypt(encryptedData, secureStorage.getSecretKey());
                    return decrypted.toString(CryptoJS.enc.Utf8);
                } catch (e) {
                    console.error('Decryption failed:', e);
                    return null;
                }
            },

            // ÂÆâÂÖ®Â≠òÂÇ®
            setItem: (key, value) => {
                const encrypted = secureStorage.encrypt(value);
                if (encrypted) {
                    localStorage.setItem(`secure_${key}`, encrypted);
                }
            },

            // ÂÆâÂÖ®ËØªÂèñ
            getItem: (key) => {
                const encrypted = localStorage.getItem(`secure_${key}`);
                if (encrypted) {
                    return secureStorage.decrypt(encrypted);
                }
                return null;
            },

            // Âà†Èô§
            removeItem: (key) => {
                localStorage.removeItem(`secure_${key}`);
            }
        };

        const allSites = ref([]);
        const searchQuery = ref("");
        const currentFilter = ref("all");
        const showModal = ref(false);
        const currentTime = ref("");
        const showSettingsModal = ref(false);
        const showAnalysisModal = ref(false);
        const tempApiKey = ref(secureStorage.getItem('gemini_api_key') || '');
        const apiKey = ref(secureStorage.getItem('gemini_api_key') || '');
        const smartInput = ref("");
        const isProcessing = ref(false);
        const isAnalyzing = ref(false);
        const analysisResult = ref("");
        const newSite = ref({ name: "", url: "", category: "tool_office", rank: 99 });

        const flatCategories = computed(() => CATEGORY_STRUCTURE.flatMap(g => g.items));
        const groupedCategories = computed(() => CATEGORY_STRUCTURE);

        onMounted(() => {
            loadSites();
            updateTime();
            setInterval(updateTime, 1000);
        });

        const loadSites = () => {
            const stored = localStorage.getItem('ahlong_assets_v5_3');
            if (stored) {
                const localSites = JSON.parse(stored);
                const siteMap = new Map();
                localSites.forEach(s => siteMap.set(s.url, s));
                PARSED_DATA.forEach(s => {
                    const existing = siteMap.get(s.url) || {};
                    siteMap.set(s.url, { ...existing, ...s });
                });
                allSites.value = Array.from(siteMap.values());
            } else {
                allSites.value = PARSED_DATA;
                saveSites();
            }
        };

        const saveSites = () => localStorage.setItem('ahlong_assets_v5_3', JSON.stringify(allSites.value));
        const updateTime = () => currentTime.value = new Date().toLocaleTimeString('zh-CN', {hour:'2-digit', minute:'2-digit'});
        const getCountByCategory = (catId) => allSites.value.filter(s => s.category === catId).length;
        const getCategoryColor = (catId) => flatCategories.value.find(c => c.id === catId)?.color || '#ccc';

        const displaySites = computed(() => {
            let result = allSites.value;
            const q = searchQuery.value.toLowerCase();
            if (q) {
                result = result.filter(s => s.name.toLowerCase().includes(q) || s.url.toLowerCase().includes(q));
            } else if (currentFilter.value !== 'all') {
                result = result.filter(s => s.category === currentFilter.value);
            }
            return result.sort((a, b) => {
                const rankA = a.rank || 99;
                const rankB = b.rank || 99;
                if (rankA !== rankB) return rankA - rankB;
                return a.name.localeCompare(b.name, 'zh-CN');
            });
        });

        const displaySitesGrouped = computed(() => {
            if (currentFilter.value !== 'all' || searchQuery.value) return {};
            const groups = {};
            CATEGORY_STRUCTURE.forEach(group => {
                group.items.forEach(cat => {
                    const items = allSites.value.filter(s => s.category === cat.id);
                    if (items.length > 0) {
                        items.sort((a, b) => (a.rank || 99) - (b.rank || 99));
                        groups[cat.name] = items;
                    }
                });
            });
            return groups;
        });

        const getFavicon = (url) => {
            try { return `https://www.google.com/s2/favicons?domain=${new URL(url).hostname}&sz=64`; } 
            catch { return 'https://via.placeholder.com/64?text=WEB'; }
        };
        const handleImageError = (e) => e.target.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23cbd5e1'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z'/%3E%3C/svg%3E";
        const getDomain = (url) => { try { return new URL(url).hostname.replace('www.', ''); } catch { return url; } };
        const getCurrentPageTitle = computed(() => {
            if (currentFilter.value === 'all') return 'ÂÖ®Â±ÄËµÑ‰∫ßÂÖ®ÊôØ';
            return flatCategories.value.find(c => c.id === currentFilter.value)?.name || 'Asset';
        });

        const visitSite = (s) => window.open(s.url, '_blank');
        const deleteSite = (s) => { if(confirm(`Âà†Èô§ ${s.name}?`)) { allSites.value = allSites.value.filter(i => i !== s); saveSites(); }};
        
        const openAddModal = () => { showModal.value = true; };
        const closeModal = () => showModal.value = false;
        const addSite = () => {
            if(!newSite.value.name) return;
            allSites.value.push({...newSite.value, rank: 99}); 
            saveSites(); closeModal();
        };
        const openSettings = () => { tempApiKey.value = apiKey.value; showSettingsModal.value = true; };
        const saveSettings = () => {
          apiKey.value = tempApiKey.value;
          secureStorage.setItem('gemini_api_key', apiKey.value);
          showSettingsModal.value = false;
      };
        
        const callGemini = async (prompt) => {
            if (!apiKey.value) { alert("ËØ∑ÂÖàÈÖçÁΩÆ API Key"); openSettings(); throw new Error("No Key"); }
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey.value}`;
            const res = await fetch(url, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }) });
            if (!res.ok) throw new Error("API Error");
            return (await res.json()).candidates[0].content.parts[0].text;
        };

        const smartParse = async () => {
            if (!smartInput.value) return;
            isProcessing.value = true;
            try {
                const cats = JSON.stringify(flatCategories.value.map(c => ({id: c.id, name: c.name})));
                const prompt = `Extract name and url from text: "${smartInput.value}". Map to category in ${cats}. Return JSON: {"name": "", "url": "", "category": ""}`;
                const text = await callGemini(prompt);
                const json = JSON.parse(text.replace(/```json|```/g, '').trim());
                newSite.value = { ...json, rank: 99 };
            } catch (e) { console.error(e); alert("ËØÜÂà´Â§±Ë¥•"); } finally { isProcessing.value = false; }
        };

        const openAnalysisModal = () => showAnalysisModal.value = true;
        const closeAnalysisModal = () => showAnalysisModal.value = false;
        const analyzeAssets = async () => {
            isAnalyzing.value = true;
            try {
                const list = allSites.value.map(s => `${s.name}(${s.category})`).join(", ");
                const res = await callGemini(`ÂàÜÊûêÊàëÁöÑËµÑ‰∫ßÂàóË°®Ôºö[${list}]„ÄÇ1. ËßíËâ≤ÁîªÂÉè„ÄÇ2. MECEÁº∫Â§±ÂàÜÊûê„ÄÇ3. 3‰∏™Êé®ËçêÂ∑•ÂÖ∑„ÄÇMarkdownËæìÂá∫„ÄÇ`);
                analysisResult.value = res;
            } catch (e) { analysisResult.value = "ÂàÜÊûêÂ§±Ë¥•"; } finally { isAnalyzing.value = false; }
        };
        const renderMarkdown = (t) => marked.parse(t);
        const safeRenderMarkdown = (t) => DOMPurify.sanitize(marked.parse(t));

        return {
            allSites, groupedCategories, flatCategories, currentFilter, displaySites, displaySitesGrouped,
            searchQuery, currentTime, showModal, showSettingsModal, showAnalysisModal,
            tempApiKey, smartInput, isProcessing, isAnalyzing, analysisResult, newSite, getCurrentPageTitle,
            openAddModal, closeModal, addSite, openSettings, saveSettings, openAnalysisModal, closeAnalysisModal,
            smartParse, analyzeAssets, renderMarkdown, safeRenderMarkdown, getFavicon, handleImageError, getDomain,
            visitSite, deleteSite, getCountByCategory, getCategoryColor
        };
    }
}).mount('#app');
</script>
</body>
</html>